"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),D=l.defineComponent({name:"fz-count-to",__name:"index",props:{startVal:{default:0},endVal:{default:new Date().getFullYear()},duration:{default:3e3},autoplay:{type:Boolean,default:!0},decimals:{default:0},decimal:{default:"."},separator:{default:","},prefix:{default:""},suffix:{default:""},useEasing:{type:Boolean,default:!0},easingFn:{type:Function,default:(c,f,m,e)=>m*(-Math.pow(2,-10*c/e)+1)*1024/1023+f}},emits:["callback","mountedCallback"],setup(c,{expose:f,emit:m}){const e=c,A=m,k=o=>!isNaN(parseFloat(o)),d=o=>{let n=o.toFixed(Math.abs(e.decimals));n+="";const x=n.split(".");let v=x[0];const q=x.length>1?e.decimal+x[1]:"",h=/(\d+)(\d{3})/;if(e.separator&&!k(e.separator))for(;h.test(v);)v=v.replace(h,"$1"+e.separator+"$2");return e.prefix+v+q+e.suffix},t=l.ref(e.startVal),p=l.ref(d(e.startVal)),u=l.ref(null),i=l.ref(!1),s=l.ref(e.duration),r=l.ref(null),w=l.ref(null),b=l.ref(null),a=l.ref(null),V=l.computed(()=>e.startVal>e.endVal),F=o=>{r.value||(r.value=o),w.value=o;const n=o-r.value;b.value=s.value-n,e.useEasing?V.value?u.value=t.value-e.easingFn(n,0,t.value-e.endVal,s.value):u.value=e.easingFn(n,t.value,e.endVal-t.value,s.value):V.value?u.value=t.value-(t.value-e.endVal)*(n/s.value):u.value=t.value+(e.endVal-t.value)*(n/s.value),V.value?u.value=u.value<e.endVal?e.endVal:u.value:u.value=u.value>e.endVal?e.endVal:u.value,p.value=d(u.value),n<s.value?(a.value!==null&&cancelAnimationFrame(a.value),a.value=requestAnimationFrame(F)):(a.value!==null&&cancelAnimationFrame(a.value),A("callback"))},g=()=>{t.value=e.startVal,r.value=null,s.value=e.duration,i.value=!1,a.value!==null&&cancelAnimationFrame(a.value),a.value=requestAnimationFrame(F)},y=()=>{r.value=null,s.value=+(b.value||0),t.value=+(u.value||0),a.value!==null&&cancelAnimationFrame(a.value),a.value=requestAnimationFrame(F),i.value=!1},_=()=>{a.value!==null&&cancelAnimationFrame(a.value),i.value=!0},B=()=>{i.value?y():_()},M=()=>{r.value=null,a.value!==null&&cancelAnimationFrame(a.value),p.value=d(e.startVal)};return l.watch(()=>[e.startVal,e.endVal],()=>{e.autoplay&&g()}),l.onMounted(()=>{e.autoplay&&g(),A("mountedCallback")}),l.onBeforeUnmount(()=>{a.value!==null&&cancelAnimationFrame(a.value)}),f({pauseResume:B,pause:_,reset:M,resume:y,start:g}),(o,n)=>(l.openBlock(),l.createElementBlock("span",null,l.toDisplayString(p.value),1))}});exports.default=D;
